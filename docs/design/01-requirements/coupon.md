## 쿠폰 요구사항 명세

### 쿠폰 생성

#### 기능적 요구사항

- Happy Path
    - 로그인한 사용자는 쿠폰을 생성할 수 있다.
    - 쿠폰 생성 시 쿠폰 타입을 선택할 수 있다.
    - 쿠폰 생성 시 쿠폰 할인 금액 또는 비율을 설정할 수 있다.
    - 쿠폰 생성 후 생성된 쿠폰 정보를 응답으로 반환한다.
    - 쿠폰 정보에는 쿠폰명, 쿠폰 타입, 할인 금액, 할인 비율, 생성일등의 정보가 포함된다.

- Fail Cases
    - 로그인하지 않은 사용자에게는 오류를 반환한다.
    - 필수 정보가 누락된 경우 오류를 반환한다.
    - 할인 금액 또는 비율이 유효하지 않은 경우 오류를 반환한다.
    - 중복된 쿠폰명으로 쿠폰을 생성하려는 경우 오류를 반환한다.

#### 비기능적 요구사항

- 사용자 인증은 `X-USER-ID` 헤더를 통해 검증된다.
- 쿠폰 생성 성공에 대한 응답은 201 Created 상태 코드와 함께 생성된 쿠폰 정보를 포함한다.
- 쿠폰 타입은 미리 정의된 값만 허용된다. (정액: `FIXED`, 정률: `PERCENTAGE`)
- 쿠폰명은 중복되지 않아야 하며, 쿠폰명은 1자 이상 20자 이하이어야 한다.
- 정액 쿠폰의 경우 할인 금액은 0 이상이어야 하며, 정률 쿠폰의 경우 할인 비율은 0% 이상 100% 이하이어야 한다.

| 케이스             | 설명                                       | HTTP 상태 코드       |
|-----------------|------------------------------------------|------------------|
| 미로그인            | `X-USER-ID` 헤더가 없을 때, 존재하지 않는 사용자 ID일 때  | 401 Unauthorized |
| 잘못된 할인 금액 또는 비율 | 할인 금액이 음수이거나 할인 비율이 0% 미만 또는 100% 초과인 경우 | 400 BadRequest   |
| 필수 정보 누락        | 쿠폰 생성에 필요한 필수 정보가 누락된 경우                 | 400 BadRequest   |
| 중복된 쿠폰명         | 이미 존재하는 쿠폰명으로 쿠폰을 생성하려는 경우               | 409 Conflict     |

### 쿠폰 목록 조회

[//]: # (TODO: 쿠폰 목록 조회 기능은 아직 구현되지 않았습니다. 추후 구현 예정입니다.)

### 쿠폰 상세 조회

[//]: # (TODO: 쿠폰 상세 조회 기능은 아직 구현되지 않았습니다. 추후 구현 예정입니다.)

### 쿠폰 배포

#### 기능적 요구사항

- Happy Path
    - 로그인한 사용자는 쿠폰을 배포할 수 있다.
    - 쿠폰 배포 시 쿠폰을 받을 사용자 ID를 지정할 수 있다.

- Fail Cases
    - 로그인하지 않은 사용자가 쿠폰을 배포하려는 경우 오류를 반환한다.
    - 쿠폰 배포 시 쿠폰이 존재하지 않는 경우 오류를 반환한다.
    - 쿠폰 배포 시 쿠폰이 사용 가능한 상태가 아닌 경우 오류를 반환한다.
    - 쿠폰을 받을 사용자가 존재하지 않는 경우 오류를 반환한다.

#### 비기능적 요구사항

- 사용자 인증은 `X-USER-ID` 헤더를 통해 검증된다.
- 쿠폰 배포 성공에 대한 응답은 200 OK 상태 코드를 포함한다.

| 케이스       | 설명                                      | HTTP 상태 코드       |
|-----------|-----------------------------------------|------------------|
| 미로그인      | `X-USER-ID` 헤더가 없을 때, 존재하지 않는 사용자 ID일 때 | 401 Unauthorized |
| 쿠폰 미존재    | 요청한 쿠폰이 존재하지 않을 때                       | 404 Not Found    |
| 쿠폰 비활성 상태 | 요청한 쿠폰이 사용 가능한 상태가 아닐 때                 | 409 Conflict     |
| 사용자 미존재   | 쿠폰을 받을 사용자가 존재하지 않을 때                   | 404 Not Found    |
